
<%# todo: fix up this horribly inefficient code %>

<table width=400>
<tr><th>Office</th><th>Incumbent</th><th></th></tr>

<% if @governor_office %>
<% governor = Office.incumbent_official(@governor_office.id) %>
<tr>
	<td>Governor</td>
	<td><%= link_to governor.name, governor if !@governor.nil? %></td>
	<td>
		<% if !@governor.nil? %>
		  <% if governor.has_photo? %>
		    <%= image_tag governor.photo_path, :height => 125, :width => 100 %>
		  <% else %>
		    No photo.
	      <% end %>
	    <% end %>
	 </td>
</tr>
<% end %>

<% if @us_senate_offices %>
  <% @us_senate_offices.each do |office| %>
  <% senator = Office.incumbent_official(office.id) %>
  <tr>
	<td><%= office.office_type.name %></td>
	<td><%= link_to senator.name, senator if !senator.nil? %></td>
	<td>
	  <% if !senator.nil? %>
	    <% if senator.has_photo? %>
	      <%= image_tag senator.photo_path, :height => 125, :width => 100 %>
	    <% else %>
	      No photo.
	    <% end %>
	  <% end %>
	</td>	
  </tr>
  <% end %>
<% end %>

<% if @us_house_offices %>
  <% @us_house_offices.each do |office| %>
  <% congressperson = Office.incumbent_official(office.id) %>
  <tr>
  	<td><%= office.office_type.name %></td>
	<td><%= link_to congressperson.name, congressperson if !congressperson.nil? %></td>
	<td>
	  <% if !congressperson.nil? %>
	    <% if congressperson.has_photo? %>
	      <%= image_tag congressperson.photo_path, :height => 125, :width => 100 %>
	    <% else %>
	      No photo.
	    <% end %>
	  <% end %>
	</td>	
  </tr>
  <% end %>
<% end %>

<% if @state_senate_offices %>
  <% @state_senate_offices.each do |office| %>
  <% official = Office.incumbent_official(office.id) %>
  <tr>
  	<td><%= office.office_type.name %></td>
	<td><%= link_to official.name, official if !official.nil? %></td>
	<td>
	  <% if !official.nil? %>
	    <% if official.has_photo? %>
	      <%= image_tag official.photo_path, :height => 125, :width => 100 %>
	    <% else %>
	      No photo.
	    <% end %>
	  <% end %>
	</td>	
  </tr>
  <% end %>
<% end %>


<% if @state_house_offices %>
  <% @state_house_offices.each do |office| %>
  <% official = Office.incumbent_official(office.id) %>
  <tr>
  	<td><%= office.office_type.name %></td>
	<td><%= link_to official.name, official if !official.nil? %></td>
	<td>
	  <% if !official.nil? %>
	    <% if official.has_photo? %>
	      <%= image_tag official.photo_path, :height => 125, :width => 100 %>
	    <% else %>
	      No photo.
	    <% end %>
	  <% end %>
	</td>	
  </tr>
  <% end %>
<% end %>


</table>

<h4>Open Polls</h4>

<table width=400>
<% @open_quick_polls.each do |poll| %>
<% path = new_quick_poll_response_path + "?quick_poll_id=" + poll.id.to_s %>
<tr><td><a href=<%=path%> ><%= poll.title %></td></tr>
<% end %>
</table>

<h4>Answered Polls</h4>

<table width=400>
<% @answered_quick_polls.each do |poll| %>
<% path = quick_poll_responses_path + "?quick_poll_id=" + poll.id.to_s %>
<tr><td><a href=<%=path%> ><%= poll.title %></td></tr>
<% end %>
</table>
